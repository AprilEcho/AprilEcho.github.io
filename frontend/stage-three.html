<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>实习阶段三练习笔记 | 新宿猫的博客小站</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/assets/icon/favicon.ico">
    <meta name="description" content="遇见即是上上签">
    <link rel="preload" href="/assets/css/0.styles.007b4830.css" as="style"><link rel="preload" href="/assets/js/app.654767d1.js" as="script"><link rel="preload" href="/assets/js/2.b710c5fc.js" as="script"><link rel="preload" href="/assets/js/5.8b669e08.js" as="script"><link rel="preload" href="/assets/js/20.c595bfcb.js" as="script"><link rel="preload" href="/assets/js/4.ad11ada8.js" as="script"><link rel="preload" href="/assets/js/6.12f579ad.js" as="script"><link rel="prefetch" href="/assets/js/10.8bee6a7c.js"><link rel="prefetch" href="/assets/js/11.0d4a067e.js"><link rel="prefetch" href="/assets/js/12.2190e8b9.js"><link rel="prefetch" href="/assets/js/13.3fb3d034.js"><link rel="prefetch" href="/assets/js/14.14f24357.js"><link rel="prefetch" href="/assets/js/15.8a6c496e.js"><link rel="prefetch" href="/assets/js/16.59c21fa7.js"><link rel="prefetch" href="/assets/js/17.7bad16b3.js"><link rel="prefetch" href="/assets/js/18.0ba8074b.js"><link rel="prefetch" href="/assets/js/19.c440fbe3.js"><link rel="prefetch" href="/assets/js/21.b8c83dce.js"><link rel="prefetch" href="/assets/js/22.1a12fd3b.js"><link rel="prefetch" href="/assets/js/23.e5427cca.js"><link rel="prefetch" href="/assets/js/24.c96ab9ac.js"><link rel="prefetch" href="/assets/js/25.60978acf.js"><link rel="prefetch" href="/assets/js/26.69ee2986.js"><link rel="prefetch" href="/assets/js/27.ac23803b.js"><link rel="prefetch" href="/assets/js/28.11020d82.js"><link rel="prefetch" href="/assets/js/29.210a3457.js"><link rel="prefetch" href="/assets/js/3.3dbd19d0.js"><link rel="prefetch" href="/assets/js/30.0365ef42.js"><link rel="prefetch" href="/assets/js/31.6e016901.js"><link rel="prefetch" href="/assets/js/32.a982afa7.js"><link rel="prefetch" href="/assets/js/33.5f2dd0dd.js"><link rel="prefetch" href="/assets/js/34.ba60f296.js"><link rel="prefetch" href="/assets/js/35.53bf1faf.js"><link rel="prefetch" href="/assets/js/7.af994d9a.js"><link rel="prefetch" href="/assets/js/8.e7984b57.js"><link rel="prefetch" href="/assets/js/9.1481c837.js">
    <link rel="stylesheet" href="/assets/css/0.styles.007b4830.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-273099e5><div class="blog-header" data-v-49a24226 data-v-273099e5><div class="tool-bar" data-v-49a24226><div class="toggle" data-v-49a24226><button class="show-list" data-v-49a24226><i aria-hidden="true" class="fa fa-bars" data-v-49a24226></i></button></div> <div class="tool-bar-1" data-v-49a24226><div class="navigation-bar" data-v-49a24226><div class="navigation-bar-item"><div class="bar-item"><a href="/" class="router-link-active"><button type="button">首页</button></a></div></div><div class="navigation-bar-item"><div class="bar-item"><a href="/daily-question/"><button type="button">每日一题</button></a></div></div><div class="navigation-bar-item"><div class="bar-item"><a href="/frontend/" class="router-link-active"><button type="button">前端笔记</button></a></div></div><div class="navigation-bar-item"><div class="bar-item"><a href="/categories/"><button type="button">分类</button></a></div></div><div class="navigation-bar-item"><div class="bar-item"><a href="/tags/"><button type="button">标签</button></a></div></div><div class="navigation-bar-item"><div class="bar-item"><a href="/essay"><button type="button">随记</button></a></div></div><div class="navigation-bar-item"><div class="bar-item"><a href="/about"><button type="button">关于我</button></a></div></div><div class="navigation-bar-item"><div class="bar-list">
    工具箱   <i aria-hidden="true" class="fa fa-caret-down"></i> <div class="bar-item-list"><div class="bar-item"><a href="http://zhongguose.com/" target="_blank"><button type="button">
            中国色
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div><div class="bar-item"><a href="https://tinypng.com/" target="_blank"><button type="button">
            图片压缩
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div><div class="bar-item"><a href="https://www.iconfont.cn/home/index" target="_blank"><button type="button">
            矢量图标
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div><div class="bar-item"><a href="https://animista.net/" target="_blank"><button type="button">
            动画库
            <i aria-hidden="true" class="fa fa-external-link"></i></button></a></div></div></div></div></div></div> <div class="search" data-v-49a24226><div class="search-box" data-v-49a24226><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="tool-bar-2" data-v-49a24226></div></div></div> <div class="list-container hide" data-v-67fbb87c data-v-273099e5></div> <div class="blog-sidebar hide" data-v-229076d0 data-v-273099e5><div class="sidebar-header" data-v-229076d0><div class="logo-box" data-v-229076d0><img src="/assets/img/logo.jpg" alt class="header-logo" data-v-229076d0></div> <p class="header-title" data-v-229076d0>新宿猫的博客小站</p> <p class="header-description" data-v-229076d0>遇见即是上上签</p></div> <div class="sidebar-subnav" data-v-229076d0><a href="/page/1" class="subnav-item" data-v-229076d0><span class="subnav-item__count" data-v-229076d0>18</span> <span class="subnav-item__name" data-v-229076d0>Archives</span></a><a href="/categories" class="subnav-item" data-v-229076d0><span class="subnav-item__count" data-v-229076d0>5</span> <span class="subnav-item__name" data-v-229076d0>Categories</span></a><a href="/tags" class="subnav-item" data-v-229076d0><span class="subnav-item__count" data-v-229076d0>15</span> <span class="subnav-item__name" data-v-229076d0>Tags</span></a></div> <div class="sidebar-nav" data-v-229076d0><a href="/" class="nav-item router-link-active" data-v-229076d0>
            首页
        </a><a href="/daily-question/" class="nav-item" data-v-229076d0>
            每日一题
        </a><a href="/frontend/" class="nav-item router-link-active" data-v-229076d0>
            前端笔记
        </a><a href="/categories/" class="nav-item" data-v-229076d0>
            分类
        </a><a href="/tags/" class="nav-item" data-v-229076d0>
            标签
        </a><a href="/essay" class="nav-item" data-v-229076d0>
            随记
        </a><a href="/about" class="nav-item" data-v-229076d0>
            关于我
        </a></div></div> <div class="theme-container__inner" data-v-273099e5><section class="main-container" data-v-273099e5><div class="article" data-v-03440d80 data-v-273099e5><div class="article-detail" data-v-03440d80><header class="post-header" data-v-03440d80><div class="post-title" data-v-03440d80><h1 data-v-03440d80>实习阶段三练习笔记</h1></div> <div class="post-meta" data-v-03440d80><div class="post-time" data-v-03440d80><i aria-hidden="true" class="fa fa-calendar" data-v-03440d80></i> <time data-v-03440d80>2022-04-11</time></div> <div class="post-count" data-v-03440d80><i aria-hidden="true" class="fa fa-file-word-o" data-v-03440d80></i> <span data-v-03440d80>0</span> <span data-v-03440d80> - </span> <i aria-hidden="true" class="fa fa-clock-o" data-v-03440d80></i> <span data-v-03440d80>0m</span></div> <div class="article-footer" data-v-2f7bef74 data-v-03440d80><div class="article-category" data-v-2f7bef74><div class="article-category-custom" data-v-2f7bef74><span data-v-2f7bef74><a href="/categories/前端笔记" data-v-2f7bef74><i aria-hidden="true" class="fa fa-folder-o" data-v-2f7bef74></i>
                    前端笔记
                </a></span></div></div> <div class="article-tags" data-v-2f7bef74><div class="article-tag yellow" data-v-2f7bef74><a href class="tag-name" data-v-2f7bef74><i aria-hidden="true" class="fa fa-tag" data-v-2f7bef74></i> <span data-v-2f7bef74>Vue</span></a></div><div class="article-tag cyan" data-v-2f7bef74><a href class="tag-name" data-v-2f7bef74><i aria-hidden="true" class="fa fa-tag" data-v-2f7bef74></i> <span data-v-2f7bef74>Vant</span></a></div></div></div></div></header> <div class="article-content" data-v-03440d80><div class="content__default" data-v-03440d80><h2 id="_1-项目初始化"><a href="#_1-项目初始化" class="header-anchor">#</a> 1. 项目初始化</h2> <h3 id="_1-1-项目安装"><a href="#_1-1-项目安装" class="header-anchor">#</a> 1.1 项目安装</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>vue init webpack act_project
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>Project name： 项目名称 ，默认为初始化建项目的名称<code>my-vue-demo</code>，不需要直接回车</li> <li>Project description： 项目描述，默认为A Vue.js project，不需要直接回车</li> <li>Author： 作者，如果有配置git的作者，自动会读取。直接回车</li> <li>Install vue-router?  是否安装vue的路由插件，需要安装，选择Y</li> <li>Use ESLint to lint your code?  是否用ESLint来限制你的代码错误和风格。不需要输入n，需要选择y，如果是大型团队开发，最好是进行配置</li> <li>setup unit tests with Karma + Mocha?  是否需要安装单元测试工具，不需要输入n，需要选择y</li> <li>Setup e2e tests with Nightwatch?  是否安装e2e来进行用户行为模拟测试，不需要输入n，需要选择y</li></ul> <p>初始化完成之后会出现以下信息，表示操作成功。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># Project initialization finished!
# ========================
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_1-2-项目目录"><a href="#_1-2-项目目录" class="header-anchor">#</a> 1.2 项目目录</h3> <p><img src="https://github.com/AprilEcho/img-warehouse/blob/master/%E9%98%B6%E6%AE%B5%E4%B8%89/mulu.png?raw=true" alt="mulu.png"></p> <h3 id="_1-3-项目运行"><a href="#_1-3-项目运行" class="header-anchor">#</a> 1.3 项目运行</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm run dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_2-项目设计"><a href="#_2-项目设计" class="header-anchor">#</a> 2. 项目设计</h2> <h3 id="_2-1-导航栏和底部标签栏封装"><a href="#_2-1-导航栏和底部标签栏封装" class="header-anchor">#</a> 2.1 导航栏和底部标签栏封装</h3> <p>考虑三个页面会用到导航栏和底部标签栏，因此将它们设计为公共组件</p> <h4 id="_2-1-1-导航栏设计"><a href="#_2-1-1-导航栏设计" class="header-anchor">#</a> 2.1.1 导航栏设计</h4> <p>借助Vant中导航栏组件</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span>
  <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>积分商城<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name">left-arrow</span>
   <span class="token attr-name">@click-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClickLeft<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>contact<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>18<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-nav-bar</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>左侧导航栏返回功能</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token function">onClickLeft</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2-1-2-底部标签栏"><a href="#_2-1-2-底部标签栏" class="header-anchor">#</a> 2.1.2 底部标签栏</h4> <p>借助Vant中标签栏组件，遍历<code>van-tabbar-item</code>列表，标签栏支持路由模式，用于搭配 <code>vue-router</code> 使用。路由模式下会匹配页面路径和标签的 <code>to</code> 属性，并自动选中对应的标签，这里我们需要通过名称匹配，因为我们要根据地址栏的路由信息来动态改变<code>active</code>的值。</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>van-tab<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item,index) in tabLists<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">replace</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.go<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.go<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab-text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.info}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab-img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props.active ? item.active : item.inactive<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-2-任务页设计"><a href="#_2-2-任务页设计" class="header-anchor">#</a> 2.2 任务页设计</h3> <h4 id="_2-2-1-每日任务和限时任务设计"><a href="#_2-2-1-每日任务和限时任务设计" class="header-anchor">#</a> 2.2.1 每日任务和限时任务设计</h4> <p>由于<code>每日任务</code>和<code>限时任务</code>模块从布局来看具有相似之处，可以设计成公共组件，每个任务小模块采用<code>flex</code>布局，分为左侧图片，中间任务内容，右侧任务进度三部分，其中任务内容通过<code>flex:1</code>占据剩余内容，数据通过父组件遍历传入子组件中。</p> <h4 id="_2-2-2-实现效果"><a href="#_2-2-2-实现效果" class="header-anchor">#</a> 2.2.2 实现效果</h4> <p><img src="https://github.com/AprilEcho/img-warehouse/blob/master/%E9%98%B6%E6%AE%B5%E4%B8%89/rw.png?raw=true" alt="rw.png"></p> <h3 id="_2-3-商城页设计"><a href="#_2-3-商城页设计" class="header-anchor">#</a> 2.3 商城页设计</h3> <p>Vant组件提供了<code>Tab 标签页</code>，不过与UI图的设计效果相差较大，所以就自己实现一个标签页，实现过程也比较简单，通过获取当前tab的索引值动态设置内容模块的显示与隐藏。</p> <h4 id="_2-3-1-商品信息模块"><a href="#_2-3-1-商品信息模块" class="header-anchor">#</a> 2.3.1 商品信息模块</h4> <p>每个商品信息模块的设计基本一致，所以在此处可以将它们封装成一个公共组件，通过分析得出商品模块左上角提示框颜色是由提示信息决定，此外当商品库存为0时，需要给商品图片添加一个蒙版。设计思路：第一，定义一个标识符来确认当前商品是否开放，因而来动态添加和移除类；第二，当库存为0时，将设计好的蒙版显示出来。</p> <p>关键代码如下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[item.flag===true ? <span class="token punctuation">'</span>top-2<span class="token punctuation">'</span> : item.flag===<span class="token punctuation">'</span>loot<span class="token punctuation">'</span> ? <span class="token punctuation">'</span><span class="token punctuation">'</span> : <span class="token punctuation">'</span>top-1<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>top-text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.toptitle}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item-img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.img<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loot-all<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.flag===<span class="token punctuation">'</span>loot<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>已抢光<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item-tip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item-integral<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left-integral<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.leftIntegral}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right-integral<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.rightIntegral}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>red-line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item-bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left-bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>库存：{{item.lastcount}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right-bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>限购0/3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="_2-3-2-实现效果"><a href="#_2-3-2-实现效果" class="header-anchor">#</a> 2.3.2 实现效果</h4> <p><img src="https://github.com/AprilEcho/img-warehouse/blob/master/%E9%98%B6%E6%AE%B5%E4%B8%89/shop-page-tj.png?raw=true" alt="shop-page-tj.png"></p> <p><img src="https://github.com/AprilEcho/img-warehouse/blob/master/%E9%98%B6%E6%AE%B5%E4%B8%89/shop-page-zb.png?raw=true" alt="shop-page-zb.png"></p> <h3 id="_2-4-个人中心设计"><a href="#_2-4-个人中心设计" class="header-anchor">#</a> 2.4 个人中心设计</h3> <h4 id="_2-4-1-用户登录设计"><a href="#_2-4-1-用户登录设计" class="header-anchor">#</a> 2.4.1 用户登录设计</h4> <p>点击<code>登录</code>按钮弹出登录对话框，登录对话框包括手机和账号登录两种方式，为了在<code>任务</code>以及<code>商城</code>模块能够展示登录的个人信息，选择Vuex进行全局状态管理。除此之外，我们知道Vuex并不能实现持久化，当我们页面刷新之后，数据会消失，可以借助<code>vuex-persistedstate</code>插件进行配置以实现数据持久化。</p> <p>关键代码如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    userInfo<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">getUserInfo</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> playload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>userInfo <span class="token operator">=</span> playload
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">createPersistedState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">//使用session缓存数据</span>
    storage<span class="token operator">:</span> window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">,</span>
    <span class="token function">reducer</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token comment">// 只存储state中的userData</span>
        userInfo<span class="token operator">:</span> val<span class="token punctuation">.</span>userInfo
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="_2-4-2-实现效果"><a href="#_2-4-2-实现效果" class="header-anchor">#</a> 2.4.2 实现效果</h4> <p><img src="https://github.com/AprilEcho/img-warehouse/blob/master/%E9%98%B6%E6%AE%B5%E4%B8%89/me-page-zh.png?raw=true" alt="me-page-zh.png"></p> <p><img src="https://github.com/AprilEcho/img-warehouse/blob/master/%E9%98%B6%E6%AE%B5%E4%B8%89/me-page.png?raw=true" alt="me-page.png"></p> <h2 id="_3-项目坑点-难点"><a href="#_3-项目坑点-难点" class="header-anchor">#</a> 3. 项目坑点/难点</h2> <h3 id="_3-1-接口请求"><a href="#_3-1-接口请求" class="header-anchor">#</a> 3.1 接口请求</h3> <p>项目使用axios发送和接收请求，axios 使用 post 发送数据时，默认是把<code>json</code>放到请求体中提交到后端。也就是说，<code>Content-Type</code>变成 <code>application/json;charset=utf-8</code>，但实际请求头多为<code>Content-Type: application/x-www-form-urlencoded</code> ，请求头的不同容易导致请求数据获取不到。因此在阶段三项目中我们可以先修改axios中请求头类型，并将参数转换为query参数（用qs.stringify()方式）</p> <h3 id="_3-2-vuex-持久化"><a href="#_3-2-vuex-持久化" class="header-anchor">#</a> 3.2 Vuex 持久化</h3> <p>Vuex本身不具备持久化的功能，所以想实现持久化需要我们手动设置，由于手动实现比较麻烦，所以我们可以直接使用插件<code>vuex-persistedstate</code>，只需简单的配置即可解决</p> <ul><li>安装vuex-persistedstate，注意与Vuex的版本匹配</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install vuex-persistedstate -s
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>实例化<code>store</code>时配置<code>vuex-persistedstate</code>插件：</li></ul> <p>默认是采用<code>localstorage</code>进行缓存</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const store = new Vuex.Store({
  state: {
    userInfo: {}
  },
  mutations: {}
  },
  plugins: [createPersistedState()]
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>采用<code>sessionstorage</code>进行缓存</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const store = new Vuex.Store({
  state: {
    userInfo: {}
  },
  mutations: {},
  plugins: [createPersistedState({
      //使用session缓存数据
    storage: window.sessionStorage,
    reducer (val) {
      return {
        // 只存储state中的userData
        userInfo: val.userInfo
      }
    }
  })]
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_3-3-路由跳转底部标签栏没有正确匹配"><a href="#_3-3-路由跳转底部标签栏没有正确匹配" class="header-anchor">#</a> 3.3 路由跳转底部标签栏没有正确匹配</h3> <p>当<code>任务</code>或<code>商城</code>模块点击头部登录按钮时，会跳转到<code>我的</code>模块页面，但底部标签栏<code>我的</code>图标没有高亮，究其原因是在设计之初只是在第一次渲染页面的时候将路由信息传给标签栏，当非标签栏引发的跳转时不会改变标签栏中<code>active</code>的值。了解问题所在之后，我们可以在底部标签栏模块中监听路由的变化，进而修改<code>active</code>的值。</p> <p>关键代码如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  watch: {
    $route (to, from) {
      this.active = to.path
    }
  }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-4-移动端适配-vw适配"><a href="#_3-4-移动端适配-vw适配" class="header-anchor">#</a> 3.4 移动端适配（vw适配）</h3> <h4 id="_3-4-1-配置过程"><a href="#_3-4-1-配置过程" class="header-anchor">#</a> 3.4.1 配置过程</h4> <p>安装依赖</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install postcss-px-to-viewport --save-dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在根目录新建一个文件<code>.postcssrc.js</code>，配置如下信息：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
  &quot;plugins&quot;: {
    &quot;postcss-import&quot;: {},
    &quot;postcss-url&quot;: {},
    // to edit target browsers: use &quot;browserslist&quot; field in package.json
    &quot;autoprefixer&quot;: {},
    &quot;postcss-px-to-viewport&quot;:{
            viewportWidth: 750,//视窗的宽度，对应的是我们设计稿的宽度
            viewportHeight: 1334, // 视窗的高度，根据750设备的宽度来指定，一般指定1334，也可以不配置
            unitPrecision: 3,//指定`px`转换为视窗单位值的小数位数，默认是5(很多时候无法整除)
            viewportUnit: 'vw',//指定需要转换成的视窗单位，建议使用vw
            selectorBlackList: ['.ignore','.hairlines'],//指定不转换为视窗单位的类 
            minPixelValue: 1,// 小于或等于`1px`不转换为视窗单位
            mediaQuery: true,// 允许在媒体查询中转换`px`，默认false
            exclude:/(\/|\\)(node_modules)(\/|\\)/, //如果是regexp, 忽略全部匹配文件;如果是数组array, 忽略指定文件.
            landscape:true,
            landscapeUnit:'vw',
            landscapeWidth:1434
        }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_3-5-进入对话框原输入内容不清空"><a href="#_3-5-进入对话框原输入内容不清空" class="header-anchor">#</a> 3.5 进入对话框原输入内容不清空</h3> <p>当我们进入登录对话框的时候，输入相关内容，点击关闭按钮之后通过控制台知道我们所设计的组件没有真正意义上的卸载，当我们想要删除输入的内容，其实只需要在关闭按钮的事件将输入框的内容清空即可。</p> <h3 id="_3-6-滚动条引起的内容区域无法完全显示"><a href="#_3-6-滚动条引起的内容区域无法完全显示" class="header-anchor">#</a> 3.6 滚动条引起的内容区域无法完全显示</h3> <p>内容区域超过可见区域会出现滚动条，标签栏是固定在底部，内容区域被遮挡的区域也就是底部标签栏，在设计内容区域时减掉标签栏的高度即可，也就是当前内容的可见区域为 屏幕高度 - 底部标签栏高度。</p></div> <ul class="post-copyright" data-v-048450f4 data-v-03440d80><li class="post-copyright-author" data-v-048450f4><b data-v-048450f4>本文作者：</b>
    新宿猫
  </li> <li class="post-copyright-link" data-v-048450f4><b data-v-048450f4>本文链接：</b> <a href="" data-v-048450f4></a></li> <li class="post-copyright-license" data-v-048450f4><b data-v-048450f4>版权声明：</b> <div data-v-048450f4>
      本博客所有文章除特别声明外，均默认采用<span class="license" data-v-048450f4>CC BY-NC-SA 4.0</span>许可协议
    </div></li></ul></div> <div class="pagination-wrapper" data-v-4cb2258c data-v-03440d80><div class="pagination-pre" style="display:none;" data-v-4cb2258c><a href="/frontend/stage-three.html" aria-current="page" class="router-link-exact-active router-link-active" data-v-4cb2258c><i aria-hidden="true" class="fa fa-chevron-left" data-v-4cb2258c></i> <span data-v-4cb2258c></span></a></div> <div class="pagination-next" style="display:none;" data-v-4cb2258c><a href="/frontend/stage-three.html" aria-current="page" class="router-link-exact-active router-link-active" data-v-4cb2258c><span data-v-4cb2258c></span> <i aria-hidden="true" class="fa fa-chevron-right" data-v-4cb2258c></i></a></div></div> <!----></div> <div class="image-box" data-v-03440d80><div class="image-modal close"><div class="image-header"><button class="image-close"><i aria-hidden="true" class="fa fa-times"></i></button></div> <div class="image-container"><img src="" alt="Loading" draggable="false" class="image-zoom"></div> <div class="image-controller"><button class="image-enlarge"><i aria-hidden="true" class="fa fa-search-plus"></i></button> <button class="image-shrink"><i aria-hidden="true" class="fa fa-search-minus"></i></button></div></div></div></div> <div class="blog-footer" data-v-0f954ca7 data-v-273099e5><!----> <p data-v-0f954ca7>Copyright © -Present 新宿猫 | Theme By Vivek</p> <div class="support" data-v-0f954ca7></div></div></section></div></div><div class="global-ui"><div class="blog-controller" data-v-0b226314><div class="controller-menu" data-v-0b226314><button class="show-menu controller-item" data-v-0b226314><div class="item-dot" data-v-0b226314></div></button> <button class="show-list controller-item" data-v-0b226314><i aria-hidden="true" class="fa fa-list-ul" data-v-0b226314></i></button> <button class="back-to-top controller-item" data-v-0b226314><i aria-hidden="true" class="fa fa-chevron-up" data-v-0b226314></i></button> <button class="show-sidebar controller-item" data-v-0b226314><i aria-hidden="true" class="fa fa-columns" data-v-0b226314></i></button></div></div></div></div>
    <script src="/assets/js/app.654767d1.js" defer></script><script src="/assets/js/2.b710c5fc.js" defer></script><script src="/assets/js/5.8b669e08.js" defer></script><script src="/assets/js/20.c595bfcb.js" defer></script><script src="/assets/js/4.ad11ada8.js" defer></script><script src="/assets/js/6.12f579ad.js" defer></script>
  </body>
</html>
